<!DOCTYPE html>
<html lang="en">

<%- include('../partials/head') %>

<body>
    
    <%- include('../partials/header') %>

    <main>
        <section class="seccion-perfil-usuario">
            <div class="perfil-usuario-header">
                <div class="perfil-usuario-portada">
                    <h1>Perfil de Usuario</h1>
                    <div class="perfil-usuario-avatar">
                        <img src="/img/avatars/<%= user.avatar%>" alt="imagen de usuario">
                    </div>
                </div>
            </div>
            <div class="perfil-usuario-body">
                <div class="perfil-usuario-bio">
                    <h3 class="titulo"><%= user.firs_name%> <%= user.last_name%></h3>
                    <p class="texto">Hola , ¡Bienvenido a i_MENTOR!. Es para nosotros un placer que te hayas unido a esta comunidad sin igual.</p>
                </div>
                <div class="perfil-usuario-footer">
                    <ul class="lista-datos">
                        <li><i class="icono fas fa-map-signs"></i>E-mail: <%= user.email%></li>
                    </ul>
                    <ul class="lista-datos">
                        <li><i class="icono fas fa-user-check"></i>Nombre de usuario: <%= user.user_name%></li>
                    </ul>
                </div>
                <div class="opciones">
                    <a href="" class="boton-opciones editar"><i class="fas fa-pen"></i></a>
                    <a href="/products/productCart" class="boton-opciones cesta-compras"><i class="fas fa-shopping-basket"></i></a>
                    <a href="" class="boton-opciones plataforma"><i class="fas fa-hand-pointer"></i></a>
                </div>
                <div class="boton-rojo">
                    <a href="#"><i class="fas fa-unlock-alt"></i> Modificar Contraseña</a>
                </div>
                <form action="" method="POST" class="register-form" enctype="multipart/form-data">
                    <div class="register-username">
                        <label for="firs_name"><i class="fas fa-user"></i> Nombre</label>
                        <input class="boxes" type="text" name="firs_name" placeholder="Nombre" id="firs_name" value="<%= locals.old ? old.firs_name : null %>">
                        <% if (locals.errors && errors.firs_name) { %>
                            <div class="text-danger">
                                <p class="feedback"><%= errors.firs_name.msg %></p>
                            </div>
                        <% } %>
                    </div>
                    <div class="register-username">
                        <label for="last_name"><i class="fas fa-user"></i> Apellido</label>
                        <input class="boxes" type="text" name="last_name" placeholder="Apellido" id="last_name" value="<%= locals.old ? old.last_name : null %>">
                        <% if (locals.errors && errors.last_name) { %>
                            <div class="text-danger">
                                <p class="feedback"><%= errors.last_name.msg %></p>
                            </div>
                        <% } %>
                    </div>
                    <div class="register-birth">
                        <label for="date_birth"><i class="fas fa-calendar-alt"></i> Fecha de nacimiento</label>
                        <input class="boxes" type="date" name="date_birth" id="date_birth" value="<%= locals.old ? old.date_birth : null %>">
                        <% if (locals.errors && errors.date_birth) { %>
                            <div class="text-danger">
                                <p class="feedback"><%= errors.date_birth.msg %></p>
                            </div>
                        <% } %>
                    </div>
                    <div class="register-age">
                        <label for="age"><i class="fas fa-universal-access"></i> Edad</label>
                        <input class="boxes" type="number" name="age" id="age" placeholder="Edad" min="0" value="<%= locals.old ? old.age : null %>">
                        <% if (locals.errors && errors.age) { %>
                            <div class="text-danger">
                                <p class="feedback"><%= errors.age.msg %></p>
                            </div>
                        <% } %>
                    </div>
                    <div class="register-username">
                        <label><i class="fas fa-universal-access"></i> Género</label>
                        <select class="boxes" name="genero" id="genero" value="<%= locals.old ? old.genero : null %>">
                            <option value="">seleccione género</option>
                            <% 
                             let generos = ['Femenino','Masculino','Binario'];
                            %> 
                            <% for (const oneGenero of generos) { %>
                                <option value="<%= oneGenero %>" <%= locals.old && (oneGenero == old.genero) ? 'selected' : null  %> ><%= oneGenero %></option>
                            <% } %>
                        </select>
                        <% if (locals.errors && errors.genero) { %>
                            <div class="text-danger">
                                <p class="feedback"><%= errors.genero.msg %></p>
                            </div>
                        <% } %>
                    </div>
                    <div class="register-username">
                        <label for="country"><i class="fas fa-flag"></i> País</label>
                        <input class="boxes" type="text" name="country" placeholder="País" id="country" value="<%= locals.old ? old.country : null %>">
                        <% if (locals.errors && errors.country) { %>
                            <div class="text-danger">
                                <p class="feedback"><%= errors.country.msg %></p>
                            </div>
                        <% } %>
                    </div>
                    <div class="register-username">
                        <label><i class="fas fa-clipboard-list"></i> Categoría</label>
                        <select class="boxes" name="category" id="category" value="<%= locals.old ? old.category : null %>">
                            <option value="">seleccione categoría</option>
                            <% 
                            let categorias = ['Usuario','Mentor','Administrador'];
                           %> 
                           <% for (const oneCategory of categorias) { %>
                               <option value="<%= oneCategory %>" <%= locals.old && (oneCategory == old.category) ? 'selected' : null  %> ><%= oneCategory %></option>
                           <% } %>
                        </select>
                        <% if (locals.errors && errors.category) { %>
                            <div class="text-danger">
                                <p class="feedback"><%= errors.category.msg %></p>
                            </div>
                        <% } %>
                    </div>
                    <div class="register-username">
                        <label for="title"><i class="fas fa-user-tie"></i> Título</label>
                        <input class="boxes" type="text" name="title" placeholder="Titulo" id="title" value="<%= locals.old ? old.title : null %>">
                        <% if (locals.errors && errors.title) { %>
                            <div class= "text-danger">
                                <p class="feedback"><%= errors.title.msg %></p>
                            </div>
                        <% } %>
                    </div>
                    <div class="imagen-muestra">
                        <label><i class="fas fa-image"></i> Imagen del usuario:</label>
                        <br>
                        <img src="" alt="Imagen del usuario">
                    </div>  
                    <div class="register-username">
                        <label><i class="fas fa-image"></i> Subir otra imagen de usuario</label>
                        <input class="boxes" type="file" name="avatar" id="avatar" accept=".jpg,.png,.gif" multiple>
                        <% if (locals.errors && errors.avatar) { %>
                            <div class="text-danger">
                                <p class="feedback"><%= errors.avatar.msg %></p>
                            </div>
                        <% } %> 
                    </div>  
                    <div class="botones">
                        <button class="register-button" type="submit"><i class="fas fa-exclamation-triangle"></i> Modificar</button>
                        <button class="register-button" type="reset"><i class="fas fa-eraser"></i> Borrar</button>   
                    </div>
                </form>
                <div class="boton-rojo">
                    <a href="/users/profile">Cancelar</a>
                </div>
            </div>
        </section>  
    </main>
    <%- include('../partials/footer') %>
</body>
</html>